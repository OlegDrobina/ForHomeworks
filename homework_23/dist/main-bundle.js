(()=>{window.addEventListener("load",(()=>{const e=localStorage.getItem("listOfTasks");e&&JSON.parse(e).forEach((e=>{!function(e){t(e.id,e.caption,e.isCompleted,!1)}(e)}))}));const e=document.querySelector("form");function t(t,i,s=!1,c=!0){const l=function(e){const t=document.createElement("li");return t.id=e||+new Date,t.classList.add("todo-item"),t}(t),a=function(){const e=document.createElement("input");return e.type="checkbox",e.addEventListener("change",n),e}(),r=function(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("todo-item__description"),t}(i),d=function(e){const t=e.newListEl;return t.appendChild(e.newChecboxEl),t.appendChild(e.newDescriptionEl),t.appendChild(e.newRemoveButtonEl),t}({newListEl:l,newChecboxEl:a,newDescriptionEl:r,newRemoveButtonEl:function(){const e=document.createElement("button");return e.classList.add("todo-item__delete"),e.textContent="Видалити",e.addEventListener("click",o),e}()});s&&(d.classList.add("todo-item--checked"),d.children[0].checked=!0),function(t){document.querySelector("ul").appendChild(t),e.reset()}(d);const u=d.id;c&&function(e,t){const n=localStorage.getItem("listOfTasks");localStorage.setItem("listOfTasks",n?JSON.stringify([...JSON.parse(n),{id:e,caption:t,isCompleted:!1}]):JSON.stringify([{id:e,caption:t,isCompleted:!1}]))}(u,i)}function n(e){const t=e.currentTarget,n=t.parentElement;n.classList.toggle("todo-item--checked"),function(e,t){const n=t.classList.contains("todo-item--checked"),o=e.parentElement.id,i=localStorage.getItem("listOfTasks"),s=JSON.parse(i).findIndex((e=>e.id==o)),c=JSON.parse(i);c[s].isCompleted=n,localStorage.setItem("listOfTasks",JSON.stringify(c))}(t,n)}function o(e){const t=e.currentTarget.parentElement,n=t.parentElement;!function(e){const t=e.target.parentElement.id,n=JSON.parse(localStorage.getItem("listOfTasks")).filter((e=>e.id!==t));localStorage.setItem("listOfTasks",JSON.stringify(n))}(e),n.removeChild(t)}e.addEventListener("submit",(e=>{e.preventDefault(),t(null,document.querySelector(".js--form__input").value)}))})();