(()=>{"use strict";const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=[{name:"N",value:[350,361]},{name:"N",value:[0,19]},{name:"NNE",value:[20,39]},{name:"NE",value:[40,59]},{name:"ENE",value:[60,79]},{name:"E",value:[80,109]},{name:"ESE",value:[110,129]},{name:"SE",value:[130,149]},{name:"SSE",value:[150,169]},{name:"S",value:[170,199]},{name:"SSW",value:[200,219]},{name:"SW",value:[220,239]},{name:"WSW",value:[240,259]},{name:"W",value:[260,289]},{name:"WNW",value:[290,309]},{name:"NW",value:[310,329]},{name:"NW",value:[330,349]}],n=document.querySelector("div"),a=document.getElementById("humidity-level"),u=document.getElementById("pressure-level"),r=document.getElementById("wind-level"),o=document.getElementById("temperature-info"),d=document.getElementById("feels-like-info"),i=document.getElementById("weather-image"),l=document.getElementById("detailed-weather-info"),m=document.getElementById("current-date-info"),c=(document.getElementById("current-date-time-info"),document.getElementById("current-time-info")),s=document.getElementById("current-date-time-info-bottom");function y(){!function(){const e=w(),t=`${e.month} ${e.day}, ${e.year} - ${e.dayOfWeekText}`;m.textContent=t}(),function(){const e=f();c.textContent=e}(),function(){try{navigator.getBattery().then((e=>{const t=document.getElementById("batery-info"),n=100*e.level;t.textContent=`Batery level: ${n}%`}))}catch(e){console.log(e)}}(),function(){const e=w(),t=f(),n=e.month,a=e.day;s.textContent=`${n} ${a}, ${t}`}(),fetch("https://api.openweathermap.org/data/2.5/weather?lat=50.450002&lon=30.523333&appid=42464cd71517254ed032696a5866b68b&units=metric").then((e=>e.json())).then((e=>{const m=e?.main?.humidity,c=e?.main?.pressure,s=e?.wind?.speed,y=e?.wind?.deg,w=t.find((e=>e.value[0]<=y&&e.value[1]>y))?.name,f=e?.main?.temp,v=e?.main?.feels_like,g=e?.weather[0]?.id;var p;p={weatherId:String(g),humidity:m,pressure:c,windSpeed:s,windDirectionName:w,temperature:f,feelsLike:v},a.textContent=`Humidity: ${p.humidity}%`,u.textContent=`Pressure: ${p.pressure}hPa`,r.textContent=`Wind: ${p.windSpeed} m/s ${p.windDirectionName}`,o.textContent=`${h(p.temperature)}`,d.textContent=`Feels like: ${h(p.feelsLike)}`,function(e){const t=e[0];let a="",u="",r="1";if("800"===e)a="sunny.webp",u="Sunny";else switch(t){case"8":a="cloudy.webp",u="Cloudy",r="2";break;case"7":a="wind.webp",u="Windy",r="2";break;case"6":a="snow.webp",u="Snow",r="3";break;case"5":a="rain.webp",u="Raining",r="2";break;case"3":a="drizzle.webp",u="Drizzle",r="2";break;case"2":a="thunderstorm.webp",u="Thunderstorm",r="2";break;default:a="sunnycloud.webp",u="Sunny cloud"}const o=`./img/${a}`;(function(e){switch(n.className="",e){case"2":n.classList.add("cloudy-weather");break;case"3":n.classList.add("snowy-weather");break;default:n.classList.add("sunny-weather")}})(r),i.src=o,l.textContent=u}(p.weatherId)})).catch((e=>{console.log(`Server request returned error: ${e}`)}))}function w(){const t=(new Date).getFullYear(),n=(new Date).toLocaleString("default",{month:"short"}),a=(new Date).getDate(),u=(new Date).getDay(),r=function(t){return e[t]}(u);return{year:t,month:n,day:a,dayOfWeek:u,dayOfWeekText:r}}function f(){return(new Date).toLocaleString("en-US",{hour:"numeric",hour12:!0,minute:"numeric"})}function h(e){return new Intl.NumberFormat("en-US",{style:"unit",unit:"celsius"}).format(e)}document.getElementById("batery-info"),document.getElementById("refresh-data-button").addEventListener("click",(()=>{y()})),window.addEventListener("load",y)})();